# 基本操作

命令行：

| 语句        | 操作     |
| ----------- | -------- |
| `python -v` | 查看版本 |
| `python -h` | 帮助     |

# 基本语法

## 编码

默认情况下，Python 3 源码文件以 UTF-8 编码

## 标识符

- 第一个字符必须是字母表中字母或下划线`_`
- 标识符的其他的部分由字母、数字和下划线组成
- 标识符对大小写敏感

## 系统保留字

使用指令 `>>> import keyword` 可查看所有保留字

## 注释

以`#`开头

### 多行注释

`''' '''`或`""" """`  
**注：单引号和双引号在 python 中完全等效**

## 缩进

**_Python 用缩进表示语法块_**

## 数字类型

- int
- float 可用科学技术法表示：2.3E-2
- bool
- complex

## 字符串 String

- 以单引号或双引号引起，也可用三引号指定多行字符串
- 字符串 **_不能改变_**
- 从左向右索引从 0 开始；从右向左从-1 开始
- 字符串的截取的语法格式：`变量[头下标:尾下标:步长]`

## 其他功能

### 多行语句

在换行处末尾加`\`

### print()输出不换行

在末尾加上 `end=" "`，如`print( x, end=" " )`

## import

在 python 用 `import` 或者 `from...import` 来导入相应的模块。

- 将整个模块(somemodule)导入

  `import somemodule`

- 从某个模块中导入某个函数

  `from somemodule import somefunction`

- 从某个模块中导入多个函数

  `from somemodule import firstfunc, secondfunc, thirdfunc`

- 将某个模块中的全部函数导入

  `from somemodule import *`

# 数据

## 不可变数据

### Number

#### 分类

1. int
   - 可用`0x`开头，表示十六进制：`0x6a == 106`
   - 用`\x`开头，同样表示十六进制，对应 ASCII 码字符：`0x42 == 'B'`
2. float
   - 可用科学计数法表示：`2.3e-2 == 0.023`
     - e、E 均可
   - 小于 1 的数，可直接缺省 0：`.23 == 0.23`；同样小数部分为 0 的数，也可缺省：`45. == 45.0`
3. bool
   - true、false
4. complex
   - 用实部+虚部表示：`0.6-0.8j`
     - j、J 均可

#### 运算

- 幂运算`**`
- 除法计算时
  - `/`除法
  - `//`除法向下取整
    - 返回的数据类型与分子分母有关：如果分子分母都为整型，则返回整型，否则返回浮点型
- 混合计算时，整型数会自动转换为浮点数
- 在交互模式中，最后被输出的表达式结果被赋值给变量`_`，如
  ```py
  >>> tax = 12.5 / 100
  >>> price = 100.50
  >>> price * tax
  12.5625
  >>> price + _
  113.0625
  ```

### String（字符串）

- 用`' '`或`" "`选中：`"CCnb"`
- 用三引号`''' '''`可以实现跨行字符串
- 字符串中可以包含换行符、制表符或其他特殊字符

#### 转义

用`\`转义字符
| 字符 | 效果 |
| ---- | ---- |
|\a | 响铃一声|
|\b|退格(Backspace)|
|\000|空|
|\v|纵向制表符|
|\t|横向制表符|
| \n | 换行 |
|\r|将光标移至行首，覆盖写入|
|\f|换页|
|\yyy|八进制，y：0~7|
|\xyy|十六进制,y:0~f|

- 字符串中如果有转义符号`\`，可在前面加`r`或`R`防止其转义:

```py
>>> print('Ru\noob')
Ru
oob
>>> print(r'Ru\noob')
Ru\noob
```

#### 截取

![索引序号](https://www.runoob.com/wp-content/uploads/2014/05/python-str-runoob.png)

`变量[头下标:尾下标]`

`+` 是字符串的连接符， `*` 表示复制当前字符串，与之结合的数字为复制的次数

```python
str = '012345'

print (str)          # 输出字符串
>>> 012345
print (str[0:-1])    # 输出第一个到倒数第二个的所有字符
>>> 01234
print (str[0])       # 输出字符串第一个字符
>>> 0
print (str[2:5])     # 输出从第三个开始到第五个的字符
>>> 234
print (str[2:])      # 输出从第三个开始的后的所有字符
>>> 2345
print (str * 2)      # 输出字符串两次，也可以写成 print (2 * str)
>>> 012345012345
print (str + "TEST") # 连接字符串
>>> 012345TEST
```

#### 字符串格式化

基本用法：
`print ("我叫 %s 今年 %d 岁!" % ('小明', 10))`

| 符号 | 描述                                 |
| ---- | ------------------------------------ |
| %c   | 格式化字符及其 ASCII 码              |
| %s   | 格式化字符串                         |
| %d   | 格式化整数                           |
| %u   | 格式化无符号整型                     |
| %o   | 格式化无符号八进制数                 |
| %x   | 格式化无符号十六进制数               |
| %X   | 格式化无符号十六进制数（大写）       |
| %f   | 格式化浮点数字，可指定小数点后的精度 |
| %e   | 用科学计数法格式化浮点数             |
| %E   | 作用同%e，用科学计数法格式化浮点数   |
| %g   | %f 和%e 的简写                       |
| %G   | %f 和 %E 的简写                      |
| %p   | 用十六进制数格式化变量的地址         |

### Tuple（元组）

- 元组（tuple）与列表类似，不同之处在于元组的元素不能修改。
- 元组写在`( )`里，元素之间用逗号隔开
- 元组中的元素类型可以不相同
- tuple 的元素不可改变，但
  - 元组可以包含可变的对象，比如 list 列表
  - 元组间可以用`+`连接，也可以用`*`复制
  - 可以用赋值语句把元组名绑定到新的元组对象（_但不确定是否会有内存泄漏，因此最好不要这么做_）
- 元组中只包含**一个元素**时，需要在元素后面添加逗号，否则括号会被当作运算符使用

#### 删除

元组只能整体删除，使用`del`语句

## 可变数据

### List（列表）

- List 写在`[ ]`之间，元素用`,`隔开
- 列表可以完成大多数集合类的数据结构实现。列表中元素的类型可以不相同，它支持数字，字符串甚至可以包含列表（嵌套）
- 索引机制与字符串相似
- Python 列表截取可以接收第三个参数，参数作用是截取的步长
  - 如果第三个参数为负数表示逆向读取

#### 更改

直接对列表数据项进行赋值即可，也可截取一部分数据项进行批量赋值修改

#### 增加

用`append()`函数：

```py
>>> list1 = ['Google', 'Runoob', 'Taobao']
>>> list1.append('Baidu')
>>> print ("更新后的列表 : ", list1)
更新后的列表 :  ['Google', 'Runoob', 'Taobao', 'Baidu']
```

#### 删除

用`del`语句：

```py
>>> list = ['Google', 'Runoob', 1997, 2000]
>>> del list[2]
>>> print ("删除第三个元素 : ", list)
['Google', 'Runoob', 2000]
```

#### 拼接

用`+`连缀（同字符串）

### Set（集合）

集合（set）是一个无序的不重复元素序列

- 可以使用大括号 `{ }` 或者 `set()` 函数创建集合
  - 创建一个空集合必须用`set()` 而不是 `{ }`，因为 `{ }` 是用来创建一个空字典

创建格式：

```py
parame = {value01,value02,...}
```

或者

```py
set(value)
```

- 集合间可以用逻辑运算符（`| & ^ -`等）

#### 添加元素

1. 调用集合成员函数`add()`：`s.add(x)`
2. `s.update(x)`：`x`可以是列表、元组、字典等

#### 移除元素

1. `s.remove(x)`：如果元素不存在，则会出错
2. `s.discard(x)`：元素不存在不会出错
3. `s.pop()`：随机弹出一个元素

除此之外，可用`s.clear()`清空集合 s

### Dictionary（字典）

- 字典的每个键值`key->value`对用`:`分割，每个对之间用`,`分割，整个字典包括在`{ }`中
- 列表是有序的对象集合，字典是无序的对象集合。两者之间的区别在于：字典当中的元素是通过键来存取的，而不是通过偏移存取。
- 字典是一种映射类型，字典用 `{ }` 标识，它是一个无序的键(key) : 值(value) 的集合 ![键值对](https://www.runoob.com/wp-content/uploads/2016/04/py-dict-3.png)
- **键(key)必须使用不可变类型；在同一个字典中，键(key)必须是唯一的**
  - 如果出现了多个相同键，则只有最后一个键值对会被记住
- 创建字典也可用`dict()`函数：

```py
>>> dict([('Runoob', 1), ('Google', 2), ('Taobao', 3)])
{'Runoob': 1, 'Google': 2, 'Taobao': 3}
>>> {x: x**2 for x in (2, 4, 6)}
{2: 4, 4: 16, 6: 36}
>>> dict(Runoob=1, Google=2, Taobao=3)
{'Runoob': 1, 'Google': 2, 'Taobao': 3}
>>>
```

- 创建空字典使用 `{ }`

#### 增添/修改键值对

直接用赋值语句即可：

```py
dict = {'Name': 'Runoob', 'Age': 7, 'Class': 'First'}

dict['Age'] = 8               # 更新 Age
dict['School'] = "菜鸟教程"    # 添加信息
```

#### 删除字典元素

1. 删除键值对：`del dict[KEY]`
2. 清空字典：`dict.clear()`
3. 删除字典：`del dict`

## 操作

### 判断数据类型

- `type(a,int)`或`isinstance(a,int)`

  `type()`不会认为子类是一种父类类型。

  `isinstance()`会认为子类是一种父类类型。

### 赋值

`var = 1`

`string = "CCnb"`

### 删除

`del var_a, var_b`

### 类型转换

| 函数                  | 描述                                                  |
| --------------------- | ----------------------------------------------------- |
| int(x [,base])        | 将 x 转换为一个整数                                   |
| float(x)              | 将 x 转换到一个浮点数                                 |
| complex(real [,imag]) | 创建一个复数                                          |
| str(x)                | 将对象 x 转换为字符串                                 |
| repr(x)               | 将对象 x 转换为表达式字符串                           |
| eval(str)             | 用来计算在字符串中的有效 Python 表达式,并返回一个对象 |
| tuple(s)              | 将序列 s 转换为一个元组                               |
| list(s)               | 将序列 s 转换为一个列表                               |
| set(s)                | 转换为可变集合                                        |
| dict(d)               | 创建一个字典。d 必须是一个 (key, value)元组序列。     |
| frozenset(s)          | 转换为不可变集合                                      |
| chr(x)                | 将一个整数转换为一个字符                              |
| ord(x)                | 将一个字符转换为它的整数值                            |
| hex(x)                | 将一个整数转换为一个十六进制字符串                    |
| oct(x)                | 将一个整数转换为一个八进制字符串                      |

# 运算符

## 算数运算符

- `+-*/`
- `%`取模，返回余数
- `**`幂
- `//`除法：向下取整（可以为负数）

## 比较运算符

- `== != > < >= <=`（与 Cpp 一致）

## 赋值运算符

- `= += -= *= /= %= **= //=`均可
- `:=`（Python3.8 新增）：海象运算符，可在表达式内部为变量赋值

```py
if (n := len(a)) > 10:
    print(f"List is too long ({n} elements, expected <= 10)")   #赋值表达式可以避免调用 len() 两次:

```

## 位运算符

将数字当做二进制计算

- `a&b`与
- `a|b`或
- `a^b`异或
- `~a`非
- `a<<2`左移（右移`>>`同理）
  - `<<`右边的数指定移动的位数，高位丢弃，低位补 0
  - 返回结果为十进制数

## 逻辑运算符

- `and`与`&&`(Cpp)一致
  - 具体逻辑：若左边为 False 返回 False，否则返回右边值
- `or`与`||`(Cpp)一致
  - 具体逻辑：若左边为 True 返回 True，否则返回右边值
- `not`与`!`(Cpp)一致

## 成员运算符

- `a in List`：如果 a 在指定序列 List 中，返回 True，否则 False
- `a not in List`：如果 a 不在指定序列 List 中，返回 True，否则 False
  - 同样可以用在字符串中，用于判断字符串中是否有指定字符

## 身份运算符

- `a is b`：是判断两个标识符是不是引用自一个对象
  - 与`==`不同的是，`==`比较值，而`is`判断引用的对象
  - `a is b`与`id(a) == id(b)`类似
- `is not`

## 优先级

1. `**`
2. `~ + -`（后两个为一元加减法【广义加减法】）
3. `* / % //`
4. `+ -`
5. `>> <<`
6. `&`
7. `^ |`
8. `<= < > >=`
9. `== !=`
10. 赋值运算符
11. 身份运算符
12. 成员运算符
13. 逻辑运算符
    - `not` > `and` > `or`

# 语句元素

## 输出

- `print(b, end=',')`可让输出不换行

## 条件语句

与 C++不同的一点在于，每个判断语句结尾要加`:`
| Python | C++ |
| ------ | ------- |
| if | if |
| elif | else if |
| else | else |

另外，Python 中无 switch-case 语句

## 循环语句

### for

一般格式：

```py
for <变量> in <序列>:
    <statements>
else:
    <statements>
```

- break/continue 语句用法与 C++一致

- 可用 `range()`函数生成从 0 开始的数列
  - 也可用 `range(a,b)`指定生成范围：
  ```py
  >>>for i in range(5,9) :
    print(i)
  5
  6
  7
  8
  ```
  - 或者在`range()`中加入第三个参数表示步长
  - 可用`range()`创建列表
  ```py
  >>>list(range(5))
  [0, 1, 2, 3, 4]
  ```

### while

- 与 C++的不同点：

1. 每个循环语句结尾要加`:`
2. 判断条件不需要加`( )`

- while 可以搭配 else 使用，else 仅退出 while 循环的一轮执行

#### 无限循环（死循环）

可用 Ctrl+C 退出当前的无限循环

### pass

Python pass 是空语句，是为了保持程序结构的完整性

pass 不做任何事情，一般用做占位语句：

```py
>>>while True:
...     pass   # 等待键盘中断 (Ctrl+C)
```

## 迭代器与生成器（！暂时没看懂）

- 迭代器是一个可以记住遍历的位置的对象，是访问集合元素的一种方式
- 迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。
- 迭代器只能往前不会后退

## 函数

### 定义函数

1. 用`def`开头定义函数，后面与 C++一样。末尾加`:`
2. `return`结束函数，可不含表达式，相当于返回 `None`
   - 也可以不写 `return`

### 参数

1. 必需参数
   （与 C++一致）
2. 关键字参数

```py
#可写函数说明
def printinfo( name, age ):
   "打印任何传入的字符串"
   print ("名字: ", name)
   print ("年龄: ", age)
   return

#调用printinfo函数
printinfo( age=50, name="runoob" )
```

3. 默认参数
   （与 C++一致）
4. 不定长参数
   函数能处理比当初声明时更多的参数。如：

```py
def printinfo( arg1, *vartuple ):
   "打印任何传入的参数"
   print ("输出: ")
   print (arg1)
   print (vartuple)

# 调用printinfo 函数
printinfo( 70, 60, 50 )
```

输出结果：

```py
输出:
70
(60, 50)
```

- 加了`*`的参数会以**元组**的形式导入，存放所有未命名的变量参数
- 加了 `**` 的参数会以**字典**的形式导入

### 匿名函数

- 用 `lambda` 创建匿名函数
- 其主体仅包含一个表达式

例如：

```py
sum = lambda arg1, arg2: arg1 + arg2
```

### 强制位置参数

在以下的例子中，形参 a 和 b 必须使用指定位置参数，c 或 d 可以是位置形参或关键字形参，而 e 或 f 要求为关键字形参:

```py
def f(a, b, /, c, d, *, e, f):
    print(a, b, c, d, e, f)
```

使用方法：

```py
f(10, 20, 30, d=40, e=50, f=60)       # 正确
f(10, b=20, c=30, d=40, e=50, f=60)   # b 不能使用关键字参数的形式
f(10, 20, 30, 40, 50, f=60)           # e 必须使用关键字参数的形式
```

## 数据结构

- 列表当做堆栈使用
  - 用 `append` 函数压栈；用 `pop()` 函数出栈
- 列表当做队列使用
  - 但这样效率很低，因为要挨个移动元素
- **列表推导式**
  - 用于对列表进行批量操作

```py
>>> [[x, x**2] for x in vec]
[[2, 4], [4, 16], [6, 36]]
```

- 可以用 if 语句作为过滤器
- 可以转置矩阵

# 模块（类）

`import <模块>`

`from <模块> import <函数>`
  - 仅引入函数到*当前命名空间*

- 一个模块只会被导入一次
- 可以将引入的函数赋值给本地函数名
```py
>>> fib = fibo.fib
```
